!function(t){function e(t,e){this.touchPositions={},this.dragData={},this.el=e||t.target,t.preventDefault(),this.dispatchDragEvent("dragstart",this.el),this.elTranslation=r(this.el),this.listen()}function n(n){var i=n.target;do i.hasAttribute("draggable")&&(n.preventDefault(),new e(n,i));while((i=i.parentNode)&&i!=t.body)}function i(e,n){var i=e.parentElement,r=e.nextSibling;i.removeChild(e);var a=n.changedTouches[0];return target=t.elementFromPoint(a.pageX-window.pageXOffset,a.pageY-window.pageYOffset),r?i.insertBefore(e,r):i.appendChild(e),target}function r(t){var e=t.style["-webkit-transform"],n=0,i=0,r=/translate\(\s*(\d+)[^,]*,\D*(\d+)/.exec(e);return r&&(n=parseInt(r[1],10),i=parseInt(r[2],10)),{x:n,y:i}}function a(t,e,n,i){return i&&(n=n.bind(i)),t.addEventListener(e,n),{off:function(){return t.removeEventListener(e,n)}}}function s(t,e,n,i){function r(i){return n(i),t.removeEventListener(e,r)}return i&&(n=n.bind(i)),t.addEventListener(e,r)}function o(t){return 0===t.length?0:t.reduce(function(t,e){return e+t},0)/t.length}"ontouchstart"in window&&(/CrOS.*Chrome/.exec(navigator.userAgent)||(t.addEventListener("touchstart",n),e.prototype={listen:function(){function e(t){this.dragend(t,t.target),n()}function n(){return this.touchPositions={},this.el=this.dragData=null,[i,r,s].forEach(function(t){return t.off()})}var i=a(t,"touchmove",this.move,this),r=a(t,"touchend",e,this),s=a(t,"touchcancel",n,this)},move:function(t){var e={x:[],y:[]};[].forEach.call(t.changedTouches,function(t,n){var i=this.touchPositions[n];i?(e.x.push(t.pageX-i.x),e.y.push(t.pageY-i.y)):this.touchPositions[n]=i={},i.x=t.pageX,i.y=t.pageY}.bind(this)),this.elTranslation.x+=o(e.x),this.elTranslation.y+=o(e.y),this.el.style["-webkit-transform"]="translate("+this.elTranslation.x+"px,"+this.elTranslation.y+"px)";var n=i(this.el,t);null!==n&&(n!=this.prevTarget&&(void 0!==this.prevTarget&&this.dispatchDragEvent("dragleave",this.prevTarget),this.prevTarget=n,this.dispatchDragEvent("dragenter",this.prevTarget)),this.dispatchDragEvent("dragover",this.prevTarget))},dragend:function(e){var n=i(this.el,e);n?this.dispatchDrop():s(t,"dragend",this.snapBack,this);var r=t.createEvent("Event");r.initEvent("dragend",!0,!0),this.el.dispatchEvent(r)},dispatchDrop:function(){var e=!0,n=t.createEvent("Event");n.initEvent("drop",!0,!0),n.dataTransfer={getData:function(t){return this.dragData[t]}.bind(this)},n.preventDefault=function(){e=!1,this.el.style["-webkit-transform"]="translate(0,0)"}.bind(this),s(t,"drop",function(){e&&this.snapBack()},this),target.dispatchEvent(n)},snapBack:function(){s(this.el,"webkitTransitionEnd",function(){this.el.style["-webkit-transition"]="none"},this),setTimeout(function(){this.el.style["-webkit-transition"]="all 0.2s",this.el.style["-webkit-transform"]="translate(0,0)"}.bind(this))},dispatchDragEvent:function(e,n){var i=t.createEvent("Event");i.initEvent(e,!0,!0),i.dataTransfer={setData:function(t,e){return this.dragData[t]=e}.bind(this),dropEffect:"move"},n.dispatchEvent(i)}},Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - binding an object that is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,i=function(){},r=function(){return n.apply(this instanceof i?this:t||window,e.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,r.prototype=new i,r})))}(document);
//# sourceMappingURL=ios-drag-drop.min.js