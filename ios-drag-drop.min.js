!function(t){function n(t,n){this.touchPositions={},this.dragData={},this.el=n||t.target,t.preventDefault(),this.dispatchDragStart(),this.elTranslation=r(this.el),this.listen()}function e(e){var i=e.target;do i.hasAttribute("draggable")&&(e.preventDefault(),new n(e,i));while((i=i.parentNode)&&i!=t.body)}function i(n,e){var i=n.parentElement,r=n.nextSibling;i.removeChild(n);var a=e.changedTouches[0];return target=t.elementFromPoint(a.pageX-window.pageXOffset,a.pageY-window.pageYOffset),r?i.insertBefore(n,r):i.appendChild(n),target}function r(t){var n=t.style["-webkit-transform"],e=0,i=0,r=/translate\(\s*(\d+)[^,]*,\D*(\d+)/.exec(n);return r&&(e=parseInt(r[1],10),i=parseInt(r[2],10)),{x:e,y:i}}function a(t,n,e,i){return i&&(e=e.bind(i)),t.addEventListener(n,e),{off:function(){return t.removeEventListener(n,e)}}}function o(t,n,e,i){function r(i){return e(i),t.removeEventListener(n,r)}return i&&(e=e.bind(i)),t.addEventListener(n,r)}function s(t){return 0===t.length?0:t.reduce(function(t,n){return n+t},0)/t.length}"ontouchstart"in window&&(/CrOS.*Chrome/.exec(navigator.userAgent)||(t.addEventListener("touchstart",e),n.prototype={listen:function(){function n(t){this.dragend(t,t.target),e()}function e(){return this.touchPositions={},this.el=this.dragData=null,[i,r,o].forEach(function(t){return t.off()})}var i=a(t,"touchmove",this.move,this),r=a(t,"touchend",n,this),o=a(t,"touchcancel",e,this)},move:function(t){var n={x:[],y:[]};[].forEach.call(t.changedTouches,function(t,e){var i=this.touchPositions[e];i?(n.x.push(t.pageX-i.x),n.y.push(t.pageY-i.y)):this.touchPositions[e]=i={},i.x=t.pageX,i.y=t.pageY}.bind(this)),this.elTranslation.x+=s(n.x),this.elTranslation.y+=s(n.y),this.el.style["-webkit-transform"]="translate("+this.elTranslation.x+"px,"+this.elTranslation.y+"px)"},dragend:function(n){var e=i(this.el,n);e?this.dispatchDrop():o(t,"dragend",this.snapBack,this);var r=t.createEvent("Event");r.initEvent("dragend",!0,!0),this.el.dispatchEvent(r)},dispatchDrop:function(){var n=!0,e=t.createEvent("Event");e.initEvent("drop",!0,!0),e.dataTransfer={getData:function(t){return this.dragData[t]}.bind(this)},e.preventDefault=function(){n=!1,this.el.style["-webkit-transform"]="translate(0,0)"}.bind(this),o(t,"drop",function(){n&&this.snapBack()},this),target.dispatchEvent(e)},snapBack:function(){o(this.el,"webkitTransitionEnd",function(){this.el.style["-webkit-transition"]="none"},this),setTimeout(function(){this.el.style["-webkit-transition"]="all 0.2s",this.el.style["-webkit-transform"]="translate(0,0)"}.bind(this))},dispatchDragStart:function(){var n=t.createEvent("Event");n.initEvent("dragstart",!0,!0),n.dataTransfer={setData:function(t,n){return this.dragData[t]=n}.bind(this),dropEffect:"move"},this.el.dispatchEvent(n)}},Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - binding an object that is not callable");var n=Array.prototype.slice.call(arguments,1),e=this,i=function(){},r=function(){return e.apply(this instanceof i?this:t||window,n.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,r.prototype=new i,r})))}(document);
//# sourceMappingURL=ios-drag-drop.min.js